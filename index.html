<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Летная +</title>
</head>
<body>
  <h1 id="auth-name">Добро пожаловать!</h1>

  <!-- Функция прямо в HTML, чтобы Telegram её точно увидел -->
  <script>
    function onTelegramAuth(user) {
      const name = user.first_name + (user.last_name ? ' ' + user.last_name : '');
      document.getElementById('auth-name').innerText = 'Привет, ' + name + '!';
      document.getElementById('flight-form').style.display = 'block';
    }
    window.onTelegramAuth = onTelegramAuth;
  </script>

  <!-- Telegram Login ВИДЖЕТ -->
  <script async src="https://telegram.org/js/telegram-widget.js?7"
    data-telegram-login="trueletnaya_bot"   <!-- ← замени на имя своего бота без @ -->
    data-size="large"
    data-userpic="false"
    data-request-access="write"
    data-onauth="onTelegramAuth(user)">
  </script>

  <!-- Форма добавления записи -->
  <form id="flight-form" style="display:none; margin-top: 20px;">
    <label>Дата: <input type="date" name="date" required /></label><br />
    <label>Тип ВС: <input type="text" name="type" required /></label><br />
    <label>Время (чч:мм): <input type="text" name="time" required /></label><br />
    <label>Комментарий: <input type="text" name="comment" /></label><br />
    <label>PDF файл: <input type="file" name="pdf" accept="application/pdf" /></label><br />
    <button type="submit">Сохранить</button>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('